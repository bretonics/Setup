#!/usr/bin/env bash

#===============================================================================================
# HELPER FUNCTIONS
#===============================================================================================

# Global Variables
source ./bin/globals

# Completed Message
completed_message() {
    echo ""
    echo ""
    echo "================================================================================"
    echo "| ${1} setup has FINISHED"
    echo "================================================================================"
    echo ""
    echo ""
}

# Get Apple ID Username (email)
getAccountId() {
    defaults read MobileMeAccounts Accounts | sed -n -e 's/.*AccountID = \"\(.*\)\"\;/\1/p'
}

# Header Message
header_message() {
    echo ""
    echo ""
    echo "================================================================================"
    echo "| Script:    $(basename "$0")"
    echo "| User:      `whoami`"
    echo "| Date:      `date`"
    echo "| PWD:       `pwd`"
    echo "| PID:       $$"
    echo "|"
    echo "| Running '${SETUP_MODE}' install..."
    echo "|     - Brewfile: ${BREW_FILE}"
    echo "|     - Secondary: $(if [ ${RUN_SECONDARY} = "true" ]; then echo "Yes"; else echo "No"; fi)"
    echo "|"
    echo "================================================================================"
    echo ""
    echo ""
    echo ""
}

# Display Nicely Formatted Message
message() {
    if [ "$1" = "info" ]; then
        local msg="${RED}\n\n${EMOJI_INFO}  ${2}${NC}\n\n\n"
    elif [ "$1" = "warning" ]; then
        local msg="${RED}\n\n${EMOJI_WARNING}  ${2}${NC}\n\n\n"
    elif [ "$1" = "fail" ]; then
        local msg="${RED}\n\n${EMOJI_FAIL} ${2}${NC}\n\n\n"
    elif [ "$1" = "error" ]; then
        local msg="${RED}\n\n${EMOJI_ERROR}  ${2}${NC}\n\n\n"
    else
        local msg="${GREEN}\n\n${EMOJI_CHECKMARK}  ${1}${NC}\n\n\n"
    fi

    shift
    printf "${msg}"
}

# Welcome Message
welcome_message() {
    m[0]="\n"
    m[1]="${YELLOW} ___  ____  ____  __  __  ____\n"
    m[2]="/ __)( ___)(_  _)(  )(  )(  _ \\ \n"
    m[3]="\__ \ )__)   )(   )(__)(  )___/\n"
    m[4]="(___/(____) (__) (______)(__)\n${NC}"
    m[5]=""
    m[6]=""

    echo -e "${m[@]}"

    echo ""
    echo "This script will automate a lot of processes."
    echo "Though not recommended to interrupt, exit this script at any time with Ctrl-C."
    echo -e "\nPress Ctrl-C to STOP now if you don't wish to proceed. You have 5 seconds..."
    sleep 5
    echo "Starting automated install: ${SETUP_MODE}"
    sleep 2
}